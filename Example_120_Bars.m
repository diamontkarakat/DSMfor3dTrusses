clc;clear all;close all;

%% Basic DATA
%This is 120 Bar 3d Truss
T.node =[1 0 0 275.590000000000;2 273.260000000000 0 196.850000000000;3 236.650000000000 136.630000000000 196.850000000000;4 136.630000000000 236.650000000000 196.850000000000;5 0 273.260000000000 196.850000000000;6 -136.630000000000 236.650000000000 196.850000000000;7 -236.650000000000 136.630000000000 196.850000000000;8 -273.260000000000 0 196.850000000000;9 -236.650000000000 -136.630000000000 196.850000000000;10 -136.630000000000 -236.650000000000 196.850000000000;11 0 -273.260000000000 196.850000000000;12 136.630000000000 -236.650000000000 196.850000000000;13 236.650000000000 -136.630000000000 196.850000000000;14 492.120000000000 0 118.110000000000;15 475.351000000000 127.370000000000 118.110000000000;16 426.188000000000 246.060000000000 118.110000000000;17 347.981000000000 347.981000000000 118.110000000000;18 246.060000000000 426.188000000000 118.110000000000;19 127.370000000000 475.351000000000 118.110000000000;20 0 492.120000000000 118.110000000000;21 -127.370000000000 475.351000000000 118.110000000000;22 -246.060000000000 426.188000000000 118.110000000000;23 -347.980000000000 347.981000000000 118.110000000000;24 -426.190000000000 246.060000000000 118.110000000000;25 -475.350000000000 127.370000000000 118.110000000000;26 -492.120000000000 0 118.110000000000;27 -475.350000000000 -127.370000000000 118.110000000000;28 -426.190000000000 -246.060000000000 118.110000000000;29 -347.980000000000 -347.980000000000 118.110000000000;30 -246.060000000000 -426.190000000000 118.110000000000;31 -127.370000000000 -475.350000000000 118.110000000000;32 0 -492.120000000000 118.110000000000;33 127.370000000000 -475.350000000000 118.110000000000;34 246.060000000000 -426.190000000000 118.110000000000;35 347.981000000000 -347.980000000000 118.110000000000;36 426.188000000000 -246.060000000000 118.110000000000;37 475.351000000000 -127.370000000000 118.110000000000;38 625.590000000000 0 0;39 541.777000000000 312.795000000000 0;40 312.795000000000 541.777000000000 0;41 0 625.590000000000 0;42 -312.800000000000 541.777000000000 0;43 -541.780000000000 312.795000000000 0;44 -625.590000000000 0 0;45 -541.780000000000 -312.800000000000 0;46 -312.800000000000 -541.780000000000 0;47 0 -625.590000000000 0;48 312.795000000000 -541.780000000000 0;49 541.777000000000 -312.800000000000 0]; % Matrix of Nodes ( No Node, X node Y node Z node )

T.element = [1 2;1 3;1 4;1 5;1 6;1 7;1 8;1 9;1 10;1 11;1 12;1 13;2 3;3 4;4 5;5 6;6 7;7 8;8 9;9 10;10 11;11 12;12 13;13 2;2 14;3 16;4 18;5 20;6 22;7 24;8 26;9 28;10 30;11 32;12 34;13 36;2 37;2 15;3 15;3 17;4 17;4 19;5 19;5 21;6 21;6 23;7 23;7 25;8 25;8 27;9 27;9 29;10 29;10 31;11 31;11 33;12 33;12 35;13 35;13 37;14 15;15 16;16 17;17 18;18 19;19 20;20 21;21 22;22 23;23 24;24 25;25 26;26 27;27 28;28 29;29 30;30 31;31 32;32 33;33 34;34 35;35 36;36 37;37 14;14 38;16 39;18 40;20 41;22 42;24 43;26 44;28 45;30 46;32 47;34 48;36 49;15 38;15 39;17 39;17 40;19 40;19 41;21 41;21 42;23 42;23 43;25 43;25 44;27 44;27 45;29 45;29 46;31 46;31 47;33 47;33 48;35 48;35 49;37 49;37 38];
NofNodes = size(T.node,1);% Number of Nodes

NofElements = size(T.element,1);% Number of Elements

T.A = ones(NofElements,1)*120; % Area for each Element
T.E = ones(NofElements,1)*6895; % Young Module fro each Element
T.Supports = [38 1 1 1;39 1 1 1;40 1 1 1;41 1 1 1;42 1 1 1;43 1 1 1;44 1 1 1;45 1 1 1;46 1 1 1;47 1 1 1;48 1 1 1;49 1 1 1;] % Node/ degree of freedom of Node in each local directory xyz, 1 = fix  0= free 
T.ExternalForces= [1 0 0 -60;2 0 0 -30;3 0 0 -30;4 0 0 -30;5 0 0 -30;6 0 0 -30;7 0 0 -30;8 0 0 -30;9 0 0 -30;10 0 0 -30;11 0 0 -30;12 0 0 -30;13 0 0 -30;14 0 0 -30;...
    15 0 0 -10;16 0 0 -10;17 0 0 -10;18 0 0 -10;19 0 0 -10;20 0 0 -10;21 0 0 -10;22 0 0 -10;23 0 0 -10;24 0 0 -10;25 0 0 -10;26 0 0 -10;27 0 0 -10;...
    28 0 0 -10;29 0 0 -10;30 0 0 -10;31 0 0 -10;32 0 0 -10;33 0 0 -10;34 0 0 -10;35 0 0 -10;36 0 0 -10;37 0 0 -10;];% Node / Force X direction / Force Y direction /Force X direction
%% Solve Truss
Tr=DSMfor3dTrusses(T);
%% Plot Truss
Plot3DTruss(T.node,T.element,T.Supports,T.ExternalForces,Tr.U,Tr.elementStress,100,3)